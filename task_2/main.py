from image_lib.image_handler import ImageHandler
from image_lib.image_processor import ImageProcessor
import os

def main():
    print("=" * 50)
    print("–ó–ê–î–ê–ù–ò–ï 2 - –í–∞—Ä–∏–∞–Ω—Ç 5")
    print("–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å Pillow")
    print("=" * 50)
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—à—É —Ç–µ—Å—Ç–æ–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É
    test_image = "test_images/test_image.jpg"
    
    if os.path.exists(test_image):
        path = test_image
        print(f"‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {test_image}")
    else:
        # –ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ—Ç, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø—É—Ç—å
        path = input("–í–≤–µ–¥–∏—Ç–µ –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é: ")
    
    # 1. –°–û–ó–î–ê–ï–ú –û–ë–†–ê–ë–û–¢–ß–ò–ö –ò –ó–ê–ì–†–£–ñ–ê–ï–ú
    print("\nüì• 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è...")
    handler = ImageHandler(path)
    image = handler.load_image()
    
    if not image:
        print("‚ùå –û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!")
        return
    
    # 2. –ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú –î–û 50%
    print("\nüìê 2. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ 50%...")
    handler.scale_to_50_percent()
    
    # 3. –°–û–•–†–ê–ù–Ø–ï–ú –° –î–ê–¢–û–ô
    print("\nüìÖ 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–µ–π –¥–∞—Ç–æ–π...")
    dated_file = handler.save_with_date()
    if dated_file:
        print(f"   –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: {dated_file}")
    
    # 4. –ü–†–ò–ú–ï–ù–Ø–ï–ú –§–ò–õ–¨–¢–† –≠–ú–ë–û–°–°
    print("\nüé® 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ '–≠–º–±–æ—Å—Å'...")
    processor = ImageProcessor(handler.image)
    processor.apply_emboss()
    
    # 5. –î–û–ë–ê–í–õ–Ø–ï–ú –í–û–î–Ø–ù–û–ô –ó–ù–ê–ö
    print("\nüíß 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ '–í–∞—Ä–∏–∞–Ω—Ç 5'...")
    processor.add_watermark()
    
    # 6. –°–û–•–†–ê–ù–Ø–ï–ú –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
    print("\nüíæ 6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...")
    final_name = "result_variant5_final.jpg"
    handler.image.save(final_name)
    
    print("\n" + "=" * 50)
    print("‚úÖ –õ–ê–ë–û–†–ê–¢–û–†–ù–ê–Ø –†–ê–ë–û–¢–ê –í–´–ü–û–õ–ù–ï–ù–ê!")
    print("=" * 50)
    print(f"üìÅ –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª: {path}")
    print(f"üìÅ –§–∞–π–ª —Å –¥–∞—Ç–æ–π: {dated_file}")
    print(f"üìÅ –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {final_name}")
    print("=" * 50)
    print("\n–í—Å–µ —Ñ–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º.")

if name == "main":
    main()
